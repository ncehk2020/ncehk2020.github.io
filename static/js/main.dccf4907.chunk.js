(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){e.exports=a(228)},149:function(e,t,a){},153:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(19),l=a.n(i),r=(a(149),a(45)),c=a(37),s=a.n(c),u=a(67),p=a(13),m=a(14),h=a(16),d=a(15),b=a(17),f=a(294),g=a(103),E=a.n(g),y=a(141),v=(a(153),a(140)),C=Object(v.a)({palette:{type:"dark"},typography:{useNextVariants:!0,fontFamily:'"Noto Sans TC", "Roboto", "Helvetica", "Arial", sans-serif'}}),w=a(27),O=a(5),k=a(288),j=a(82),S=function(e){return{root:{backgroundColor:"#000",position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex"},progress:{flexGrow:1},appMenuDialogTitleRoot:{padding:"16px 10px 16px 18px"},fab:{position:"absolute",bottom:e.spacing(1.5),left:"50%",marginLeft:-26,color:e.palette.common.white,backgroundColor:e.palette.common.black,"&:hover":{backgroundColor:j.a[900]}},snackbar:{bottom:90},fill:{flex:1},qrcodeContainer:{backgroundColor:e.palette.common.white,padding:e.spacing(1)},linkBackground:{marginTop:e.spacing(2),marginBottom:e.spacing(2),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),backgroundColor:j.a[900]}}},D=a(33),x=a(53),A=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).resize=function(e){(Math.abs(e.bounds.height-a.state.dimensions.height)>30||Math.abs(e.bounds.width-a.state.dimensions.width)>30)&&a.setState({dimensions:e.bounds})},a.state={fullscreen:!1,dimensions:{width:-1,height:-1}},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.player,a=e.containerWidth,n=e.containerHeight,i=this.state.dimensions,l=i.width,r=i.height;return o.a.createElement(D.a,{bounds:!0,onResize:this.resize},function(e){var i=e.measureRef;return o.a.createElement("div",{ref:i,className:"playerContainer",style:{width:a+"%",height:n+"%"}},o.a.createElement("div",{className:"player facebook"},o.a.createElement("iframe",{src:encodeURI("https://www.facebook.com/plugins/video.php?href={id}".replace("{id}",t.video))+"&height="+parseInt(r)+"&width="+parseInt(l),title:t.title,frameBorder:"0",scrolling:"no",allowtransparency:"true",allow:"autoplay; encrypted-media",allowFullScreen:!x.isMobile||x.isMobile&&!x.isAndroid})))})}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).resize=function(e){a.setState({dimensions:e.bounds})},a.state={dimensions:{width:-1,height:-1},initCompleted:!1},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({initCompleted:!0})},1e4)}},{key:"render",value:function(){var e=this,t=this.props,a=t.player,n=t.containerWidth,i=t.containerHeight;return o.a.createElement(D.a,{bounds:!0,onResize:this.resize},function(t){var l=t.measureRef;return o.a.createElement("div",{className:"playerContainer",style:{width:n+"%",height:i+"%"}},o.a.createElement("div",{className:"player yahoo"},o.a.createElement("iframe",{ref:l,onMouseOver:function(){e.setState({initCompleted:!0})},src:a.video,title:a.title,frameBorder:"0",scrolling:"no",allowtransparency:"true",allow:"autoplay; encrypted-media",allowFullScreen:!0,style:e.state.initCompleted?{}:{flex:0,width:320}})))})}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).resize=function(e){a.setState({dimensions:e.bounds})},a.state={dimensions:{width:-1,height:-1}},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.player,a=e.containerWidth,n=e.containerHeight;return o.a.createElement(D.a,{bounds:!0,onResize:this.resize},function(e){var i=e.measureRef;return o.a.createElement("div",{ref:i,className:"playerContainer",style:{width:a+"%",height:n+"%"}},o.a.createElement("div",{className:"player"},o.a.createElement("iframe",{src:t.video,title:t.title,frameBorder:"0",scrolling:"no",allowtransparency:"true",allow:"autoplay; encrypted-media",allowFullScreen:!0})))})}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).resize=function(e){a.setState({dimensions:e.bounds})},a.state={dimensions:{width:-1,height:-1}},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.data;if(!e)return null;var t=this.state.dimensions,a=t.width,n=t.height,i=e.length,l=1,c=1;i>1&&(2===i?l=2:(1.2*a<n&&i<=4?(l=1,c=i):(l=2,c=2),i>4&&(i<=6?l=3:i>20?(l=5,c=5):i>16?(l=5,c=4):i>12?(l=4,c=4):i>9?(l=4,c=3):(l=3,c=3))));var s=100/l,u=100/c;return(1.2*a>=n||2===i||i>4)&&a<n&&(s=100/c,u=100/l),o.a.createElement(D.a,{bounds:!0,onResize:this.resize},function(t){var a=t.measureRef;return o.a.createElement("div",{ref:a,className:"playerList"},e.map(function(e,t){var a=e.type,n=Object(r.a)(e,["type"]),i={player:n,containerWidth:s,containerHeight:u};switch(a){case"facebook":return o.a.createElement(A,Object.assign({key:n.video},i));case"yahoo":return o.a.createElement(P,Object.assign({key:n.video},i));default:return o.a.createElement(N,Object.assign({key:n.video},i))}}))})}}]),t}(n.Component),R=a(293),V=a(257),W=a(258),z=a(259),T=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preloadReady,a=e.handleNewDataDialogResult,n=e.classes;return o.a.createElement(R.a,{ClickAwayListenerProps:{onClickAway:function(){}},className:n.snackbar,open:t,onClose:a({confirmed:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},message:"New Live(s) Found \u627e\u5230\u65b0\u76f4\u64ad",action:[o.a.createElement(V.a,{key:"watch",color:"secondary",onClick:a({confirmed:!0})},"Watch Now \u7acb\u5373\u6536\u770b"),o.a.createElement(W.a,{key:"close",color:"inherit",onClick:a({confirmed:!1})},o.a.createElement(z.a,null,"close"))]})}}]),t}(n.Component),L=Object(w.a)(Object(O.a)(S,{withTheme:!0}))(T),F=a(289),J=a(260),I=a(264),B=a(282),H=a(57),U=a(291),_=a(261),q=a(279),Q=a(280),G=a(285),$=a(283),K=a(284),X=a(286),Y=a(287),Z=a(129),ee=a.n(Z),te=a(130),ae=a(262),ne=a(263),oe=a(230),ie=a(292),le=a(277),re=a(265),ce=a(266),se=a(267),ue=a(268),pe=a(269),me=a(270),he=a(271),de=a(272),be=a(273),fe=a(274),ge=a(275),Ee=a(276),ye=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).resize=function(e){a.setState({dimensions:e.bounds})},a.handleCloseCopiedMsg=function(){a.setState({copied:!1})},a.state={dimensions:{width:-1,height:-1},copied:!1},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.dimensions,i=t.copied,l=this.props,r=l.open,c=l.handleDialogAction,s=l.classes;return o.a.createElement(n.Fragment,null,o.a.createElement(F.a,{maxWidth:"xs",open:r,onClose:c({action:"close"})},o.a.createElement(J.a,{disableTypography:!0},o.a.createElement(H.a,{noWrap:!0},"\u5206\u4eab\u53cd\u9001\u4e2d\u76f4\u64ad\u53f0"),o.a.createElement(H.a,{noWrap:!0},"Share NCE Lives")),o.a.createElement(_.a,null),o.a.createElement(ae.a,null,o.a.createElement(ne.a,{classes:{root:s.qrcodeContainer}},o.a.createElement(D.a,{bounds:!0,onResize:this.resize},function(e){var t=e.measureRef;return o.a.createElement("div",{ref:t},o.a.createElement(ee.a,{size:a.width,value:window.location.href,logo:"./apple-touch-icon.png"}))})),o.a.createElement(oe.a,{square:!0,classes:{root:s.linkBackground}},o.a.createElement(I.a,{container:!0,spacing:1,alignItems:"center"},o.a.createElement(I.a,{item:!0},o.a.createElement(z.a,null,"link")),o.a.createElement(I.a,{item:!0,classes:{item:s.fill}},o.a.createElement(ie.a,{fullWidth:!0,readOnly:!0,value:window.location.href}))))),o.a.createElement(_.a,null),o.a.createElement(ae.a,null,o.a.createElement(I.a,{container:!0,spacing:1},o.a.createElement(I.a,{item:!0},o.a.createElement(re.a,{url:window.location.href},o.a.createElement(ce.a,{size:32,round:!0}))),o.a.createElement(I.a,{item:!0},o.a.createElement(se.a,{url:window.location.href},o.a.createElement(ue.a,{size:32,round:!0}))),o.a.createElement(I.a,{item:!0},o.a.createElement(pe.a,{url:window.location.href},o.a.createElement(me.a,{size:32,round:!0}))),o.a.createElement(I.a,{item:!0},o.a.createElement(he.a,{url:window.location.href},o.a.createElement(de.a,{size:32,round:!0}))),o.a.createElement(I.a,{item:!0},o.a.createElement(be.a,{url:window.location.href},o.a.createElement(fe.a,{size:32,round:!0}))),o.a.createElement(I.a,{item:!0},o.a.createElement(ge.a,{url:window.location.href},o.a.createElement(Ee.a,{size:32,round:!0}))))),o.a.createElement(_.a,null),o.a.createElement(le.a,null,o.a.createElement(V.a,{onClick:c({action:"close"}),color:"inherit"},"\u95dc\u9589 Close"),o.a.createElement(te.CopyToClipboard,{text:window.location.href,onCopy:function(){return e.setState({copied:!0})}},o.a.createElement(V.a,{color:"secondary"},"\u8907\u88fd\u9023\u7d50 Copy Link")))),o.a.createElement(R.a,{className:s.snackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:i,autoHideDuration:3e3,onClose:this.handleCloseCopiedMsg,message:o.a.createElement("span",null,"\u5df2\u5c07\u9023\u7d50\u8907\u88fd\u5728\u526a\u8cbc\u7c3f Link is copied into clipboard")}))}}]),t}(n.Component),ve=Object(w.a)(Object(O.a)(S,{withTheme:!0}))(ye),Ce=a(278),we=a(295),Oe=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={newVisibleCount:null},e}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.open,n=t.handleDialogAction,i=t.appOptions,l=this.state.newVisibleCount;return o.a.createElement(F.a,{maxWidth:"xs",open:a,onClose:n({action:"close"})},o.a.createElement(J.a,{disableTypography:!0},o.a.createElement(H.a,{noWrap:!0},"\u66f4\u6539\u76f4\u64ad\u4e0a\u9650"),o.a.createElement(H.a,{noWrap:!0},"Change Maximum of Livestream")),o.a.createElement(ae.a,{dividers:!0},o.a.createElement(Ce.a,null,"\u8acb\u6ce8\u610f\uff01\u6578\u64da\u6d41\u91cf\u53d6\u6c7a\u65bc\u60a8\u6536\u770b\u76f4\u64ad\u7684\u6578\u91cf\u3002 ",o.a.createElement("br",null),"Please note that your data usage will increase according to the number of livestreams playing."),o.a.createElement(we.a,{defaultValue:parseInt(i.visibleCount),getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider-small-steps",step:1,marks:[{value:4,label:"4"},{value:6,label:"6"},{value:9,label:"9"},{value:12,label:"12"},{value:16,label:"16"},{value:20,label:"20"},{value:25,label:"25"}],min:1,max:25,valueLabelDisplay:"auto",onChangeCommitted:function(t,a){e.setState({newVisibleCount:a})}})),o.a.createElement(le.a,null,o.a.createElement(V.a,{onClick:n({action:"changeVisibleCount",newValue:l}),color:"inherit"},"\u5132\u5b58 Save")))}}]),t}(n.Component),ke=Object(w.a)(Object(O.a)(S,{withTheme:!0}))(Oe),je=a(142),Se=a(281),De=a(290),xe=a(139),Ae=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).resetState=function(){a.props.appOptions.customPlaylist?a.setState({newVisibleCount:null,checked:JSON.parse(a.props.appOptions.customPlaylist)}):a.setState({newVisibleCount:null,checked:[]})},a.handleCheck=function(e){return function(){var t=a.state.checked.indexOf(e),n=Object(je.a)(a.state.checked);-1===t?n.push(e):n.splice(t,1),a.setState({checked:n})}},a.props.appOptions.customPlaylist?a.state={newVisibleCount:null,checked:JSON.parse(a.props.appOptions.customPlaylist)}:a.state={newVisibleCount:null,checked:[]},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.open,n=t.handleDialogAction,i=t.allData,l=this.state.checked;return o.a.createElement(F.a,{maxWidth:"xs",fullWidth:!0,open:a,onClose:function(){e.resetState(),n({action:"close"})()}},o.a.createElement(J.a,{disableTypography:!0},o.a.createElement(H.a,{noWrap:!0},"\u81ea\u8a02\u76f4\u64ad\u983b\u9053"),o.a.createElement(H.a,{noWrap:!0},"Custom Livestreams Playlist")),o.a.createElement(q.a,{style:{maxHeight:"100%",overflow:"auto"}},i.map(function(t){var a=t.type,n=Object(r.a)(t,["type"]);return o.a.createElement(Q.a,{key:n.source,dense:!0,button:!0,onClick:e.handleCheck(n.source)},o.a.createElement(Se.a,null,o.a.createElement(B.a,null,o.a.createElement(xe.SocialIcon,{network:a,fgColor:"#FFFFFF"}))),o.a.createElement($.a,{primary:n.title,secondary:n.sourceTitle}),o.a.createElement(K.a,null,o.a.createElement(De.a,{edge:"start",checked:-1!==l.indexOf(n.source),onChange:e.handleCheck(n.source),disableRipple:!0})))})),o.a.createElement(le.a,null,o.a.createElement(V.a,{onClick:function(){e.setState({checked:[]})},color:"inherit"},"\u6e05\u7a7a\u9078\u9805 Clear Options"),o.a.createElement(V.a,{onClick:n({action:"updateCustomPlaylist",newValue:this.state.checked}),color:"inherit"},"\u78ba\u8a8d Confirm")))}}]),t}(n.Component),Pe=Object(w.a)(Object(O.a)(S,{withTheme:!0}))(Ae),Ne=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).handleShareDialogAction=function(t){var a=t.action;return function(){"close"===a&&e.setState({openShareDialog:!1})}},e.handleVisibleCountDialogAction=function(t){var a=t.action,n=t.newValue;return function(){"close"===a&&e.setState({openChangeVisibleCountDialog:!1}),"changeVisibleCount"===a&&(e.props.handleAppMenuAction({action:"changeVisibleCount",newValue:n||e.props.appOptions.visibleCount})(),e.setState({openChangeVisibleCountDialog:!1}))}},e.handlePlaylistDialogAction=function(t){var a=t.action,n=t.newValue;return function(){"close"===a&&e.setState({openCustomPlaylistDialog:!1}),"updateCustomPlaylist"===a&&(e.props.handleAppMenuAction({action:"updateCustomPlaylist",newValue:n||[]})(),e.setState({openCustomPlaylistDialog:!1}))}},e.state={openChangeVisibleCountDialog:!1,openShareDialog:!1,openCustomPlaylistDialog:!1},e}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.open,i=t.handleAppMenuAction,l=t.classes,r=t.theme,c=t.appOptions,s=t.allData,u=this.state,p=u.openChangeVisibleCountDialog,m=u.openShareDialog,h=u.openCustomPlaylistDialog,d={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen};return o.a.createElement(n.Fragment,null,o.a.createElement(F.a,{open:a,maxWidth:"xs",fullWidth:!0,onClose:i({action:"close"})},o.a.createElement(J.a,{disableTypography:!0,classes:{root:l.appMenuDialogTitleRoot}},o.a.createElement(I.a,{container:!0,spacing:2,justify:"space-between"},o.a.createElement(I.a,{item:!0},o.a.createElement(I.a,{container:!0,spacing:2,justify:"space-between",alignItems:"center"},o.a.createElement(I.a,{item:!0},o.a.createElement(B.a,{src:"./apple-touch-icon.png"})),o.a.createElement(I.a,{item:!0},o.a.createElement(H.a,{noWrap:!0},"\u53cd\u9001\u4e2d\u76f4\u64ad\u53f0"),o.a.createElement(H.a,{noWrap:!0},"No China Extradition Live")))),o.a.createElement(U.a,{only:"xs"},o.a.createElement(I.a,{item:!0},o.a.createElement(W.a,{onClick:function(){e.setState({openShareDialog:!0})}},o.a.createElement(z.a,null,"share")))))),o.a.createElement(_.a,null),o.a.createElement(q.a,{component:"nav","aria-label":"Main mailbox folders"},o.a.createElement(U.a,{smUp:!0},o.a.createElement(Q.a,{button:!0,onClick:function(){e.setState({openShareDialog:!0})}},o.a.createElement(G.a,null,o.a.createElement(z.a,null,"share")),o.a.createElement($.a,{primary:"\u5206\u4eab\u53cd\u9001\u4e2d\u76f4\u64ad\u53f0",secondary:"Share NCE Lives"}))),o.a.createElement(Q.a,{button:!0,onClick:i({action:"checkSource"})},o.a.createElement(G.a,null,o.a.createElement(z.a,null,"sync")),o.a.createElement($.a,{primary:"\u6aa2\u67e5\u65b0\u76f4\u64ad\u4f86\u6e90",secondary:"Check for New Livestreams"})),!(c&&c.customPlaylist)&&o.a.createElement(Q.a,{button:!0,onClick:function(){e.setState({openChangeVisibleCountDialog:!0})}},o.a.createElement(G.a,null,o.a.createElement(z.a,null,"view_module")),o.a.createElement($.a,{primary:"\u66f4\u6539\u76f4\u64ad\u4e0a\u9650",secondary:"Change Maximum of Livestreams"})),o.a.createElement(Q.a,{button:!0,onClick:function(){e.setState({openCustomPlaylistDialog:!0})}},o.a.createElement(G.a,null,o.a.createElement(z.a,null,"subscriptions")),o.a.createElement($.a,{primary:"\u81ea\u8a02\u76f4\u64ad\u983b\u9053",secondary:"Custom Livestreams Playlist"}),c&&c.customPlaylist&&o.a.createElement(K.a,null,o.a.createElement(z.a,null,"check_circle"))),o.a.createElement(Q.a,{button:!0,onClick:i({action:"popupWindow"})},o.a.createElement(G.a,null,o.a.createElement(z.a,null,"open_in_new")),x.isMobile?o.a.createElement($.a,{primary:"\u5728\u700f\u89bd\u5668\u958b\u5553\u76f4\u64ad\u53f0",secondary:"Open NCE Lives in Browser"}):o.a.createElement($.a,{primary:"\u5f48\u51fa\u65b0\u8996\u7a97",secondary:"Popup New Window"})))),o.a.createElement(ve,{open:m,handleDialogAction:this.handleShareDialogAction}),o.a.createElement(ke,{open:p,handleDialogAction:this.handleVisibleCountDialogAction,appOptions:c}),o.a.createElement(Pe,{open:h,handleDialogAction:this.handlePlaylistDialogAction,allData:s,appOptions:c}),o.a.createElement(X.a,{in:!0,timeout:d,style:{transitionDelay:"".concat(d.exit,"ms")},unmountOnExit:!0},o.a.createElement(Y.a,{className:l.fab,color:"inherit",onClick:i({action:"open"})},o.a.createElement(z.a,null,"menu"))))}}]),t}(n.Component),Me=Object(w.a)(Object(O.a)(S,{withTheme:!0}))(Ne),Re=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={currentLink:null,mobileOpen:!1},e}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.classes,n=e.loading,i=e.appOptions,l=e.allData,r={preloadReady:e.preloadReady,preloadData:e.preloadData,handleNewDataDialogResult:e.handleNewDataDialogResult},c={open:e.showAppMenu,handleAppMenuAction:e.handleAppMenuAction,appOptions:i,allData:l};return o.a.createElement("div",{className:a.root},n?o.a.createElement("div",{className:a.progress},o.a.createElement(k.a,null)):o.a.createElement(M,{data:t}),o.a.createElement(L,r),o.a.createElement(Me,c))}}]),t}(n.Component),Ve=Object(w.a)(Object(O.a)(S,{withTheme:!0}))(Re),We=Object(y.a)(),ze="https://ncehk2019.github.io/nce-live-datasrc/current.json",Te=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).showAppMenu=function(){e.setState({showAppMenu:!0})},e.refresh=Object(u.a)(s.a.mark(function t(){var a,n,o,i,l,r,c,u,p;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,fetch(ze+"?time="+new Date);case 4:return a=t.sent,t.next=7,a.json();case 7:n=t.sent,o=n.config,i=n.current,n.lastUpdTs,l=o.defaultVisibleCount,r=l,c=i,u=[],p=[],e.options&&e.options.visibleCount?r=e.options.visibleCount:(e.options.visibleCount=r,e.options&&e.options.customPlaylist&&(r=e.options.customPlaylist.length)),c.forEach(function(t){e.options&&e.options.customPlaylist?JSON.parse(e.options.customPlaylist).includes(t.source)&&u.push(t):u.length<r&&u.push(t),p.push(t)}),e.setState({loading:!1,data:u,allData:p}),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(1),console.log("refresh error",t.t0),e.setState({loading:!1,data:[],allData:[]});case 23:case"end":return t.stop()}},t,null,[[1,19]])})),e.autoCheckSource=function(){e.cancelAutoCheckSourceJob(),e.autoCheckSourceJob=setInterval(Object(u.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkSource();case 2:case"end":return t.stop()}},t)})),3e4)},e.cancelAutoCheckSourceJob=function(){e.autoCheckSourceJob&&clearInterval(e.autoCheckSourceJob)},e.checkSource=Object(u.a)(s.a.mark(function t(){var a,n,o,i,l,c,u,p,m,h,d,b,f,g;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.data,!a.preloadReady&&!e.preloadFetching){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,e.preloadFetching=!0,t.next=7,fetch(ze+"?time="+new Date);case 7:return o=t.sent,t.next=10,o.json();case 10:i=t.sent,l=i.config,c=i.current,i.lastUpdTs,u=l.defaultVisibleCount,p=u,m=c,e.options&&e.options.visibleCount?p=e.options.visibleCount:e.options.visibleCount=p,h=[],d=[],b=null,e.options&&e.options.customPlaylist&&(b=JSON.parse(e.options.customPlaylist)),m.forEach(function(e){b?b.includes(e.source)&&h.push(e):h.length<p&&h.push(e),d.push(e)}),n.sourceTitle,n.title,f=Object(r.a)(n,["sourceTitle","title"]),h.sourceTitle,h.title,g=Object(r.a)(h,["sourceTitle","title"]),JSON.stringify(f)!==JSON.stringify(g)?e.setState({preloadReady:!0,preloadData:h,allData:d}):e.setState({allData:d}),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(3),console.log("checkSource error",t.t0),e.setState({preloadReady:!1,preloadData:[]});case 30:e.preloadFetching=!1;case 31:case"end":return t.stop()}},t,null,[[3,26]])})),e.handleNewDataDialogResult=function(t){var a=t.confirmed;return function(){a?e.setState({data:e.state.preloadData,preloadReady:!1,preloadData:[]}):(e.cancelAutoCheckSourceJob(),e.setState({preloadReady:!1,preloadData:[]}))}},e.handleAppMenuAction=function(t){var a=t.action,n=t.newValue;return function(){if("close"!==a){if("open"!==a)return"changeVisibleCount"===a?(e.options.visibleCount=n,We.push({search:"?visibleCount="+n}),e.refresh(),void e.setState({showAppMenu:!1})):"checkSource"===a?(e.setState({showAppMenu:!1}),e.checkSource(),void e.autoCheckSource()):"updateCustomPlaylist"===a?(e.options.customPlaylist=n,We.push({search:n.length>0?"?customPlaylist="+JSON.stringify(n):"?visibleCount="+e.options.visibleCount}),void e.setState({showAppMenu:!1})):void("popupWindow"!==a||window.open(document.location.href,"_blank","fullscreen=yes,directories=no,location=no,toolbar=no,scrollbars=no,menubar=no"));e.setState({showAppMenu:!0})}else e.setState({showAppMenu:!1})}},e.state={loading:!1,data:[],preloadReady:!1,preloadData:[],showAppMenu:!1,allData:[]},e.preloadFetching=!1,e.options=E.a.parse(We.location.search,{ignoreQueryPrefix:!0}),e.unlistenHistory=We.listen(function(){var t=E.a.parse(We.location.search,{ignoreQueryPrefix:!0});e.options&&(t.visibleCount===e.options.visibleCount&&t.customPlaylist===e.options.customPlaylist||(e.options.visibleCount=t.visibleCount,e.options.customPlaylist=t.customPlaylist,e.refresh()))}),e}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.refresh(),this.autoCheckSource();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.cancelAutoCheckSourceJob(),this.unlistenHistory()}},{key:"render",value:function(){return o.a.createElement(f.a,{theme:C},o.a.createElement(Ve,Object.assign({},this.state,{appOptions:this.options,handleNewDataDialogResult:this.handleNewDataDialogResult,handleAppMenuAction:this.handleAppMenuAction})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[144,1,2]]]);